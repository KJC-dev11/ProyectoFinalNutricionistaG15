/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Vista;

import Modelo.Dieta;
import Modelo.Paciente;
import Persistencia.DietaData;
import Persistencia.PacienteData;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author FrancoPC
 */
public class VistaDieta extends javax.swing.JPanel {

    private DietaData dietaData;
    private PacienteData pacienteData;
    private DefaultTableModel tableModel;
    
    public VistaDieta() {
        initComponents();
        dietaData = new DietaData();
        pacienteData = new PacienteData();
        tableModel = (DefaultTableModel) jtDieta.getModel();
        cargarPacientes();
        cargarDietas();
        cargarMenus();
        limpiarCampos();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jtDieta = new javax.swing.JTable();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jtfCodDieta = new javax.swing.JTextField();
        jtfNombreDieta = new javax.swing.JTextField();
        jtfCalTotales = new javax.swing.JTextField();
        jdcFechInicio = new com.toedter.calendar.JDateChooser();
        jdcFechFinal = new com.toedter.calendar.JDateChooser();
        jrbEstado = new javax.swing.JRadioButton();
        jbNuevo = new javax.swing.JButton();
        jbGuardar = new javax.swing.JButton();
        jbBorrar = new javax.swing.JButton();
        jbEditar = new javax.swing.JButton();
        jLabel9 = new javax.swing.JLabel();
        jcbPacientes = new javax.swing.JComboBox<>();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        jbBuscar = new javax.swing.JButton();
        jcbLunes = new javax.swing.JComboBox<>();
        jcbMartes = new javax.swing.JComboBox<>();
        jcbMiercoles = new javax.swing.JComboBox<>();
        jcbJueves = new javax.swing.JComboBox<>();
        jcbViernes = new javax.swing.JComboBox<>();

        setMaximumSize(new java.awt.Dimension(740, 430));
        setMinimumSize(new java.awt.Dimension(740, 430));

        jPanel1.setBackground(new java.awt.Color(255, 255, 255));

        jLabel1.setFont(new java.awt.Font("Century Gothic", 3, 18)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(0, 0, 0));
        jLabel1.setIcon(new javax.swing.ImageIcon("D:\\Franco\\ULP\\02. Materias\\1°Año\\2°Cuatrimestre\\Lab. de Programación\\6-Proyecto Final\\Proyect_Final\\--PROYECTO-de-la-REALIDAD--NUTRICIONISTA\\--PROYECTO-de-la-REALIDAD--NUTRICIONISTA\\NUTRICIONISTAPROYECTOFINALG15\\src\\imagenes\\dieta (1).png")); // NOI18N
        jLabel1.setText("DIETA");

        jLabel2.setBackground(new java.awt.Color(255, 255, 255));
        jLabel2.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        jLabel2.setForeground(new java.awt.Color(0, 0, 0));
        jLabel2.setText("Nombre De La Dieta:");

        jLabel5.setBackground(new java.awt.Color(255, 255, 255));
        jLabel5.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        jLabel5.setForeground(new java.awt.Color(0, 0, 0));
        jLabel5.setText("Calorias Totales:");

        jLabel6.setBackground(new java.awt.Color(255, 255, 255));
        jLabel6.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        jLabel6.setForeground(new java.awt.Color(0, 0, 0));
        jLabel6.setText("F. Inicio:");

        jtDieta.setBackground(new java.awt.Color(255, 255, 255));
        jtDieta.setFont(new java.awt.Font("Century Gothic", 0, 8)); // NOI18N
        jtDieta.setForeground(new java.awt.Color(0, 0, 0));
        jtDieta.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null}
            },
            new String [] {
                "Id", "Nombre", "Paciente", "Lunes", "Martes", "Miercoles", "Jueves", "Viernes", "Inicio", "Fin", "C. Tot.", "Estado"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false, false, false, false, false, false, true
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jtDieta.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jtDietaMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(jtDieta);
        if (jtDieta.getColumnModel().getColumnCount() > 0) {
            jtDieta.getColumnModel().getColumn(0).setMinWidth(20);
            jtDieta.getColumnModel().getColumn(0).setPreferredWidth(3);
            jtDieta.getColumnModel().getColumn(0).setMaxWidth(20);
            jtDieta.getColumnModel().getColumn(8).setMinWidth(50);
            jtDieta.getColumnModel().getColumn(8).setPreferredWidth(5);
            jtDieta.getColumnModel().getColumn(8).setMaxWidth(50);
            jtDieta.getColumnModel().getColumn(9).setMinWidth(50);
            jtDieta.getColumnModel().getColumn(9).setPreferredWidth(5);
            jtDieta.getColumnModel().getColumn(9).setMaxWidth(50);
            jtDieta.getColumnModel().getColumn(10).setMinWidth(40);
            jtDieta.getColumnModel().getColumn(10).setPreferredWidth(10);
            jtDieta.getColumnModel().getColumn(11).setMinWidth(50);
            jtDieta.getColumnModel().getColumn(11).setMaxWidth(50);
        }

        jLabel7.setBackground(new java.awt.Color(255, 255, 255));
        jLabel7.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        jLabel7.setForeground(new java.awt.Color(0, 0, 0));
        jLabel7.setText("F. Fin:");

        jLabel8.setBackground(new java.awt.Color(255, 255, 255));
        jLabel8.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        jLabel8.setForeground(new java.awt.Color(0, 0, 0));
        jLabel8.setText("Estado:");

        jtfCodDieta.setBackground(new java.awt.Color(255, 255, 255));
        jtfCodDieta.setForeground(new java.awt.Color(0, 0, 0));

        jtfNombreDieta.setBackground(new java.awt.Color(255, 255, 255));
        jtfNombreDieta.setForeground(new java.awt.Color(0, 0, 0));

        jtfCalTotales.setBackground(new java.awt.Color(255, 255, 255));
        jtfCalTotales.setForeground(new java.awt.Color(0, 0, 0));

        jdcFechInicio.setBackground(new java.awt.Color(255, 255, 255));
        jdcFechInicio.setForeground(new java.awt.Color(0, 0, 0));

        jdcFechFinal.setBackground(new java.awt.Color(255, 255, 255));
        jdcFechFinal.setForeground(new java.awt.Color(0, 0, 0));

        jrbEstado.setBackground(new java.awt.Color(255, 255, 255));
        jrbEstado.setForeground(new java.awt.Color(0, 0, 0));
        jrbEstado.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));

        jbNuevo.setBackground(new java.awt.Color(51, 153, 0));
        jbNuevo.setIcon(new javax.swing.ImageIcon("D:\\Franco\\ULP\\02. Materias\\1°Año\\2°Cuatrimestre\\Lab. de Programación\\6-Proyecto Final\\Proyect_Final\\--PROYECTO-de-la-REALIDAD--NUTRICIONISTA\\--PROYECTO-de-la-REALIDAD--NUTRICIONISTA\\NUTRICIONISTAPROYECTOFINALG15\\src\\imagenes\\nuevo.png")); // NOI18N
        jbNuevo.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jbNuevo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbNuevoActionPerformed(evt);
            }
        });

        jbGuardar.setBackground(new java.awt.Color(51, 153, 0));
        jbGuardar.setIcon(new javax.swing.ImageIcon("D:\\Franco\\ULP\\02. Materias\\1°Año\\2°Cuatrimestre\\Lab. de Programación\\6-Proyecto Final\\Proyect_Final\\--PROYECTO-de-la-REALIDAD--NUTRICIONISTA\\--PROYECTO-de-la-REALIDAD--NUTRICIONISTA\\NUTRICIONISTAPROYECTOFINALG15\\src\\imagenes\\guardar.png")); // NOI18N
        jbGuardar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jbGuardar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbGuardarActionPerformed(evt);
            }
        });

        jbBorrar.setBackground(new java.awt.Color(51, 153, 0));
        jbBorrar.setIcon(new javax.swing.ImageIcon("D:\\Franco\\ULP\\02. Materias\\1°Año\\2°Cuatrimestre\\Lab. de Programación\\6-Proyecto Final\\Proyect_Final\\--PROYECTO-de-la-REALIDAD--NUTRICIONISTA\\--PROYECTO-de-la-REALIDAD--NUTRICIONISTA\\NUTRICIONISTAPROYECTOFINALG15\\src\\imagenes\\tacho.png")); // NOI18N
        jbBorrar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jbBorrar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbBorrarActionPerformed(evt);
            }
        });

        jbEditar.setBackground(new java.awt.Color(51, 153, 0));
        jbEditar.setIcon(new javax.swing.ImageIcon("D:\\Franco\\ULP\\02. Materias\\1°Año\\2°Cuatrimestre\\Lab. de Programación\\6-Proyecto Final\\Proyect_Final\\--PROYECTO-de-la-REALIDAD--NUTRICIONISTA\\--PROYECTO-de-la-REALIDAD--NUTRICIONISTA\\NUTRICIONISTAPROYECTOFINALG15\\src\\imagenes\\editar.png")); // NOI18N
        jbEditar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jbEditar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbEditarActionPerformed(evt);
            }
        });

        jLabel9.setBackground(new java.awt.Color(255, 255, 255));
        jLabel9.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        jLabel9.setForeground(new java.awt.Color(0, 0, 0));
        jLabel9.setText("Paciente:");

        jcbPacientes.setBackground(new java.awt.Color(255, 255, 255));
        jcbPacientes.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));

        jLabel10.setBackground(new java.awt.Color(255, 255, 255));
        jLabel10.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        jLabel10.setForeground(new java.awt.Color(0, 0, 0));
        jLabel10.setText("Cod. Dieta:");

        jLabel11.setBackground(new java.awt.Color(255, 255, 255));
        jLabel11.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        jLabel11.setForeground(new java.awt.Color(0, 0, 0));
        jLabel11.setText("Lunes:");

        jLabel12.setBackground(new java.awt.Color(255, 255, 255));
        jLabel12.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        jLabel12.setForeground(new java.awt.Color(0, 0, 0));
        jLabel12.setText("Martes:");

        jLabel13.setBackground(new java.awt.Color(255, 255, 255));
        jLabel13.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        jLabel13.setForeground(new java.awt.Color(0, 0, 0));
        jLabel13.setText("Miercoles:");

        jLabel14.setBackground(new java.awt.Color(255, 255, 255));
        jLabel14.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        jLabel14.setForeground(new java.awt.Color(0, 0, 0));
        jLabel14.setText("Jueves:");

        jLabel15.setBackground(new java.awt.Color(255, 255, 255));
        jLabel15.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        jLabel15.setForeground(new java.awt.Color(0, 0, 0));
        jLabel15.setText("Viernes:");

        jbBuscar.setBackground(new java.awt.Color(0, 153, 0));
        jbBuscar.setIcon(new javax.swing.ImageIcon("D:\\Franco\\ULP\\02. Materias\\1°Año\\2°Cuatrimestre\\Lab. de Programación\\6-Proyecto Final\\Proyect_Final\\--PROYECTO-de-la-REALIDAD--NUTRICIONISTA\\--PROYECTO-de-la-REALIDAD--NUTRICIONISTA\\NUTRICIONISTAPROYECTOFINALG15\\src\\imagenes\\lupa.png")); // NOI18N
        jbBuscar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jbBuscar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbBuscarActionPerformed(evt);
            }
        });

        jcbLunes.setBackground(new java.awt.Color(255, 255, 255));
        jcbLunes.setFont(new java.awt.Font("Century Gothic", 1, 12)); // NOI18N
        jcbLunes.setForeground(new java.awt.Color(0, 0, 0));
        jcbLunes.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));

        jcbMartes.setBackground(new java.awt.Color(255, 255, 255));
        jcbMartes.setFont(new java.awt.Font("Century Gothic", 1, 12)); // NOI18N
        jcbMartes.setForeground(new java.awt.Color(0, 0, 0));
        jcbMartes.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));

        jcbMiercoles.setBackground(new java.awt.Color(255, 255, 255));
        jcbMiercoles.setFont(new java.awt.Font("Century Gothic", 1, 12)); // NOI18N
        jcbMiercoles.setForeground(new java.awt.Color(0, 0, 0));
        jcbMiercoles.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));

        jcbJueves.setBackground(new java.awt.Color(255, 255, 255));
        jcbJueves.setFont(new java.awt.Font("Century Gothic", 1, 12)); // NOI18N
        jcbJueves.setForeground(new java.awt.Color(0, 0, 0));
        jcbJueves.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));

        jcbViernes.setBackground(new java.awt.Color(255, 255, 255));
        jcbViernes.setFont(new java.awt.Font("Century Gothic", 1, 12)); // NOI18N
        jcbViernes.setForeground(new java.awt.Color(0, 0, 0));
        jcbViernes.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(312, 312, 312)
                                .addComponent(jLabel1))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addContainerGap()
                                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addGroup(jPanel1Layout.createSequentialGroup()
                                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                                    .addComponent(jLabel2)
                                                    .addComponent(jLabel10))
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                    .addComponent(jtfCodDieta, javax.swing.GroupLayout.DEFAULT_SIZE, 170, Short.MAX_VALUE)
                                                    .addComponent(jtfNombreDieta)))
                                            .addGroup(jPanel1Layout.createSequentialGroup()
                                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                                    .addComponent(jLabel5)
                                                    .addComponent(jLabel9))
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                    .addComponent(jcbPacientes, javax.swing.GroupLayout.PREFERRED_SIZE, 170, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                    .addComponent(jtfCalTotales, javax.swing.GroupLayout.PREFERRED_SIZE, 170, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addGap(81, 81, 81)
                                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addGroup(jPanel1Layout.createSequentialGroup()
                                                .addComponent(jLabel8)
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(jrbEstado)
                                                .addGap(0, 0, Short.MAX_VALUE))
                                            .addGroup(jPanel1Layout.createSequentialGroup()
                                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                                        .addGap(19, 19, 19)
                                                        .addComponent(jLabel7))
                                                    .addComponent(jLabel6))
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                    .addComponent(jdcFechInicio, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                                    .addComponent(jdcFechFinal, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(jLabel12)
                                    .addComponent(jLabel11)
                                    .addComponent(jLabel13)
                                    .addComponent(jLabel14)
                                    .addComponent(jLabel15))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(jcbViernes, 0, 150, Short.MAX_VALUE)
                                    .addComponent(jcbJueves, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jcbMiercoles, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jcbMartes, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jcbLunes, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jbEditar)
                            .addComponent(jbNuevo)
                            .addComponent(jbBuscar))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jbGuardar)
                            .addComponent(jbBorrar)))
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 735, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(23, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jtfCodDieta, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel10)
                            .addComponent(jLabel11)
                            .addComponent(jcbLunes, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(jLabel12)
                                .addComponent(jcbMartes, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(jtfNombreDieta, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabel2)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel5)
                            .addComponent(jtfCalTotales, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel13)
                            .addComponent(jcbMiercoles, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabel14)
                                    .addComponent(jcbJueves, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabel15)
                                    .addComponent(jcbViernes, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel9)
                                    .addComponent(jcbPacientes, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jdcFechInicio, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jLabel6))))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jdcFechFinal, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(jLabel7)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jrbEstado)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addGap(6, 6, 6)
                                        .addComponent(jLabel8))))))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jbBuscar)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jbNuevo)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jbEditar))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(28, 28, 28)
                        .addComponent(jbGuardar)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jbBorrar)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 17, Short.MAX_VALUE)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 152, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(14, 14, 14))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
    }// </editor-fold>//GEN-END:initComponents

    private void jbNuevoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbNuevoActionPerformed
        limpiarCampos();
        cargarDietas();
    }//GEN-LAST:event_jbNuevoActionPerformed

    private void jbGuardarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbGuardarActionPerformed
        guardarDieta();
        limpiarCampos();
        cargarDietas();
    }//GEN-LAST:event_jbGuardarActionPerformed

    private void jbBorrarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbBorrarActionPerformed
        borrarDieta();
        limpiarCampos();
        cargarDietas();
    }//GEN-LAST:event_jbBorrarActionPerformed

    private void jbEditarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbEditarActionPerformed
        actualizarDieta();
        limpiarCampos();
        cargarDietas();
    }//GEN-LAST:event_jbEditarActionPerformed

    private void jbBuscarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbBuscarActionPerformed
        buscarDieta();
        limpiarCampos();
        cargarDietas();
    }//GEN-LAST:event_jbBuscarActionPerformed

    private void jtDietaMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jtDietaMouseClicked
              if (evt.getClickCount()==2) {
            int renglon = jtDieta.getSelectedRow();
            
            jtfCodDieta.setText(jtDieta.getValueAt(renglon, 0).toString());
            jtfNombreDieta.setText(jtDieta.getValueAt(renglon, 1).toString());
            jcbPacientes.setSelectedItem(jtDieta.getValueAt(renglon, 2).toString());
            jcbLunes.setSelectedItem(jtDieta.getValueAt(renglon, 3).toString());
            jcbMartes.setSelectedItem(jtDieta.getValueAt(renglon, 4).toString());
            jcbMiercoles.setSelectedItem(jtDieta.getValueAt(renglon, 5).toString());
            jcbJueves.setSelectedItem(jtDieta.getValueAt(renglon, 6).toString());
            jcbViernes.setSelectedItem(jtDieta.getValueAt(renglon, 7).toString());
            
            String inci = jtDieta.getValueAt(renglon, 8).toString();
            String fi = jtDieta.getValueAt(renglon, 9).toString();
            
            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
            
            Date inicio;
            Date fin;
                  try {
                      inicio = sdf.parse(inci);
                      fin = sdf.parse(fi);
                      
                      jdcFechInicio.setDate(inicio);
                      jdcFechFinal.setDate(fin);
                  } catch (ParseException ex) {
                      Logger.getLogger(VistaDieta.class.getName()).log(Level.SEVERE, null, ex);
                  }
                  
            jtfCalTotales.setText(jtDieta.getValueAt(renglon, 10).toString());
                  if (jtDieta.getValueAt(renglon, 11).toString().equalsIgnoreCase("Activo")) {
                      jrbEstado.setSelected(true);
                      
                  }else if (jtDieta.getValueAt(renglon, 11).toString().equalsIgnoreCase("Inactivo"))
                      jrbEstado.setSelected(false);
        }
    }//GEN-LAST:event_jtDietaMouseClicked


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JButton jbBorrar;
    private javax.swing.JButton jbBuscar;
    private javax.swing.JButton jbEditar;
    private javax.swing.JButton jbGuardar;
    private javax.swing.JButton jbNuevo;
    private javax.swing.JComboBox<String> jcbJueves;
    private javax.swing.JComboBox<String> jcbLunes;
    private javax.swing.JComboBox<String> jcbMartes;
    private javax.swing.JComboBox<String> jcbMiercoles;
    private javax.swing.JComboBox<String> jcbPacientes;
    private javax.swing.JComboBox<String> jcbViernes;
    private com.toedter.calendar.JDateChooser jdcFechFinal;
    private com.toedter.calendar.JDateChooser jdcFechInicio;
    private javax.swing.JRadioButton jrbEstado;
    private javax.swing.JTable jtDieta;
    private javax.swing.JTextField jtfCalTotales;
    private javax.swing.JTextField jtfCodDieta;
    private javax.swing.JTextField jtfNombreDieta;
    // End of variables declaration//GEN-END:variables
    private void limpiarCampos() {
        jtfCodDieta.setText("");
        jtfNombreDieta.setText("");
        jtfCalTotales.setText("");
        jcbPacientes.setSelectedIndex(-1);
        jdcFechInicio.setDate(null);
        jdcFechFinal.setDate(null);
        jrbEstado.setSelected(false);
        jcbLunes.setSelectedIndex(-1);
        jcbMartes.setSelectedIndex(-1);
        jcbMiercoles.setSelectedIndex(-1);
        jcbJueves.setSelectedIndex(-1);
        jcbViernes.setSelectedIndex(-1);
       
    }

    private void cargarPacientes() {
        
        List<String> pacientes = dietaData.obtenerPacientes();
        
        for (String p : pacientes) {
            jcbPacientes.addItem(p);
        }
    }
    
    private void cargarMenus(){
    
        List<String> menus = dietaData.obtenerMenus();
        
        for (String menu : menus) {
            jcbLunes.addItem(menu);
            jcbMartes.addItem(menu);
            jcbMiercoles.addItem(menu);
            jcbJueves.addItem(menu);
            jcbViernes.addItem(menu);
        }
    }
    
    private void cargarDietas() {
        
        List<Dieta> dietas = dietaData.obtenerDietas();
        
        tableModel.setRowCount(0);
    
        for (Dieta d : dietas) {
            tableModel.addRow(new Object[]{
                d.getCodDieta(),
                d.getNombreDieta(),
                d.getNombrePaciente(),
                d.getLunes(),
                d.getMartes(),
                d.getMiercoles(),
                d.getJueves(),
                d.getViernes(),
                d.getfInicio().toString(),
                d.getfFin(),
                d.getTotalCalorias(),
                d.isEstado() ? "Activo" : "Inactivo"
            });
        }
    }
    
    private void guardarDieta(){
        int codDieta = Integer.parseInt(jtfCodDieta.getText());
        String nombreDieta = jtfNombreDieta.getText();
        String lunes = jcbLunes.getSelectedItem().toString();
        String martes = jcbMartes.getSelectedItem().toString();
        String miercoles = jcbMiercoles.getSelectedItem().toString();
        String jueves = jcbJueves.getSelectedItem().toString();
        String viernes = jcbViernes.getSelectedItem().toString();
        Date fechaIn = jdcFechInicio.getDate();
        Date fechaFin = jdcFechFinal.getDate();
        String nombPaciente = jcbPacientes.getSelectedItem().toString();
        int totCalorias = Integer.parseInt(jtfCalTotales.getText());
        boolean estado = jrbEstado.isSelected();

        Dieta nuevaDieta = new Dieta(codDieta, nombreDieta, lunes, martes, miercoles, jueves, viernes, fechaIn, fechaFin, nombPaciente, totCalorias, estado);

        dietaData.guardarDieta(nuevaDieta);
        
        limpiarCampos();
    } 
    
    private void actualizarDieta(){
        
        try {
            int codDieta = Integer.parseInt(jtfCodDieta.getText());
            String nombreDieta = jtfNombreDieta.getText();
            String lunes = jcbLunes.getSelectedItem().toString();
            String martes = jcbMartes.getSelectedItem().toString();
            String miercoles = jcbMiercoles.getSelectedItem().toString();
            String jueves = jcbJueves.getSelectedItem().toString();
            String viernes = jcbViernes.getSelectedItem().toString();
            Date fechaIn = jdcFechInicio.getDate();
            Date fechaFin = jdcFechFinal.getDate();
            String nombPaciente = jcbPacientes.getSelectedItem().toString();
            int totCalorias = Integer.parseInt(jtfCalTotales.getText());
            boolean estado = jrbEstado.isSelected();

            Dieta nuevaDieta = new Dieta(codDieta, nombreDieta, lunes, martes, miercoles, jueves, viernes, fechaIn, fechaFin, nombPaciente, totCalorias, estado);


            dietaData.actualizarDieta(nuevaDieta);
            
            limpiarCampos();
            
            JOptionPane.showMessageDialog(this, "Dieta actualizada con exito");
        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, "Error al actualizar la dieta" + e.getMessage());
        }
    }
    
        private void buscarDieta() {

        try {
            
            String nomDieta = jtfNombreDieta.getText();
            
            List<Dieta> dietas = dietaData.buscarRenglonPorNombre(nomDieta);
            DefaultTableModel model = (DefaultTableModel) jtDieta.getModel();
            model.setRowCount(0);

            if (!(dietas.isEmpty())) {
                for (Dieta d : dietas) {
                tableModel.addRow(new Object[]{
                d.getCodDieta(),
                d.getNombreDieta(),
                d.getLunes(),
                d.getMartes(),
                d.getMiercoles(),
                d.getJueves(),
                d.getViernes(),
                d.getfInicio(),
                d.getfFin(),
                d.getNombrePaciente(),
                d.getTotalCalorias(),
                d.isEstado()
            });
        }
                
            } else {
                JOptionPane.showMessageDialog(this, "Dieta no encontrada.");
            }
            
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "Ingrese un codigo de dieta válido.", "Error", JOptionPane.ERROR_MESSAGE);
        }
    }
    
    private void borrarDieta(){
        try {
            int codDieta = Integer.parseInt(jtfCodDieta.getText());
            dietaData.eliminarDieta(codDieta);
            limpiarCampos();
            
        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, "Error al eliminar dieta" + e.getMessage());
        }
    }
}
        
            
    

